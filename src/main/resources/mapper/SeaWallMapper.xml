<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.carbarn.inter.mapper.SeaWallMapper">

    <select id="getSeaWall" resultType="com.carbarn.inter.pojo.seawall.SeaWallPOJO">
        SELECT
        *
        FROM
        seawall
        <where>
            <if test="seaWallPageDTO.seaWallType != -1">
                AND seaWallType = #{seaWallPageDTO.seaWallType}
            </if>
            <if test="seaWallPageDTO.keywords != null and seaWallPageDTO.keywords != ''">
                AND title like '%${seaWallPageDTO.keywords}%'
            </if>
            <if test="seaWallPageDTO.is_first_page == 1">
                AND is_first_page = #{seaWallPageDTO.is_first_page}
            </if>
            AND delete_flag = 0
        </where>
        order by create_time desc
        limit #{seaWallPageDTO.pageStart}, #{seaWallPageDTO.pageSize}
    </select>


    <insert id="insertNewSeaWall" parameterType="com.carbarn.inter.pojo.seawall.SeaWallPOJO">
        insert into seawall(title, seaWallType, is_first_page, picture, url)
        values(#{title}, #{seaWallType}, #{is_first_page}, #{picture}, #{url})
    </insert>

    <update id="deleteSeaWall">
        update seawall
        set delete_flag = 1
        where id = #{id}
    </update>

</mapper>